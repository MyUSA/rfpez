// Generated by CoffeeScript 1.3.3
(function() {
  var draft_saved, form_update_handler, save_draft, save_draft_button;

  draft_saved = true;

  save_draft_button = $("#save-draft-button");

  save_draft_button.button('loading');

  form_update_handler = function() {
    draft_saved = false;
    return save_draft_button.button('reset');
  };

  save_draft = function() {
    var form;
    if (draft_saved === true) {
      return;
    }
    form = $(".new-bid-form");
    form.find("input[name=submit_now]").val('false');
    form.ajaxSubmit();
    form.find("input[name=submit_now]").val('true');
    draft_saved = true;
    return save_draft_button.button('loading');
  };

  $(document).on("click", "#save-draft-button", save_draft);

  $(document).on("input", ".new-bid-form :input", form_update_handler);

  $(document).on("click", "#add-deliverable-button", form_update_handler);

  window.setInterval(save_draft, 5000);

}).call(this);
